<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="时间不负有心人">
<meta name="keywords" content="前端,web开发,php,vue,node,广交朋友,欢迎交流!">
<meta property="og:type" content="website">
<meta property="og:title" content="王相的个人博客">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="王相的个人博客">
<meta property="og:description" content="时间不负有心人">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="王相的个人博客">
<meta name="twitter:description" content="时间不负有心人">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/">





  <title>王相的个人博客</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王相的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">时间不负有心人</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/15/echarts/高德地图/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/15/echarts/高德地图/" itemprop="url">高德地图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-15T10:42:04+08:00">
                2019-07-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="结合checkbox打点生成不同的masker图标"><a href="#结合checkbox打点生成不同的masker图标" class="headerlink" title="结合checkbox打点生成不同的masker图标"></a>结合checkbox打点生成不同的masker图标</h4><ul>
<li><p>html </p>
<p>  <el-form ref="form" :model="form"></el-form></p>
<pre><code>&lt;el-form-item&gt;
    &lt;div class=&quot;menu&quot;&gt;
        &lt;el-checkbox v-model=&quot;form.kakou&quot; @change=&quot;handleCheck(&apos;kakou&apos;, &apos;01&apos;)&quot;&gt;&lt;/el-checkbox&gt;
        &lt;span&gt;卡口&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;menu&quot;&gt;
        &lt;el-checkbox v-model=&quot;form.dianjing&quot; @change=&quot;handleCheck(&apos;dianjing&apos;, &apos;02&apos;)&quot;&gt;&lt;/el-checkbox&gt;
        &lt;span&gt;电警&lt;/span&gt;
    &lt;/div&gt;
&lt;/el-form-item&gt;
</code></pre><p>  </p>
</li>
<li><p>js</p>
<p>  在vue data中定义form 复选框checkbox 的命名和图标img保持一致</p>
<pre><code>form: {
        kakou: false,
        dianjing: false
    },
</code></pre><p>  定义点位数组</p>
<pre><code>pointData: {
    kakou: [],
    dianjing: []
},

removeData: {   //masker数组 方便清空
    kakou: {markers:[],cluster:null},
    dianjing: {markers:[],cluster:null}
},
</code></pre><p>  在methods中定义复选框选中的方法</p>
<pre><code>handleCheck : function (image, vlaue) {
    if (this.form[image]) {
        this.loading = this.$loading({ //loading
            lock: true,
            text: &apos;生成点位中&apos;,
            spinner: &apos;el-icon-loading&apos;,
            background: &apos;rgba(0, 0, 0, 0.7)&apos;
        });
        this.getData(image, vlaue); //请求接口 或者对应的点位经纬度
    } else {
        //删除点位图标
        this.toggleRemoveSpecifiedMarker(this.pointData[image], image); 
        if(this.removeData[image].cluster){
            this.removeData[image].cluster.clearMarkers(this.removeData[image]);
        }
        this.removeData[image].cluster = null;
    }
},
</code></pre><p>  请求点位数据</p>
<pre><code>getData : function (type, value) {  //value 在html中定义不同的数字区分
  var that = this;
  that.sendAjax(&apos;POST&apos;, &apos;xxxxxxx‘, {&apos;value&apos;: value}, function (res) {
          if (res &amp;&amp; res.result) {
              that.pointData[type] = [];  //每次进入都为空
              for (var i = 0; i&lt; res.result.length; i++) {  //遍历追加点位坐标
                  that.pointData[type].push({  
                      x: res.result[i].JD,
                      y: res.result[i].WD
                  })
              }
              that.toggleAddMarker(that.pointData[type], type);
          }
      });
  },
</code></pre><p>  添加点位标记 地图打点（高德API 第三章 图层类 这个只是打点标记 无信息窗体）</p>
<pre><code>  toggleAddMarker : function (pointdata, image) {
    if(commonMaps.map){
        var opts=new IMAP.MarkerOptions();
        opts.anchor = IMAP.Constants.BOTTOM_CENTER;
        //图标路径拼接
        opts.icon=new IMAP.Icon(&quot;image/&quot;+ image +&quot;_1.png&quot;,{&quot;size&quot;:new IMAP.Size(35, 30)}); 
        for (var i = 0; i&lt; pointdata.length; i++) {
            var point = pointdata[i];  //点位数据
            var lnglat=new IMAP.LngLat(point.x, point.y);
            if(lnglat){
                marker=new IMAP.Marker(lnglat, opts);
                commonMaps.map.getOverlayLayer().addOverlay(marker);
                this.removeData[image].markers.push(marker);
            }
        }
        this.loading.close();
    }
},
</code></pre><p>没有选中 则删除点标记</p>
<pre><code>toggleRemoveSpecifiedMarker : function (pointdata, image) {
    if (commonMaps.map) {
        commonMaps.map.getOverlayLayer().clear(this.removeData[image].markers);
        this.removeData[image].markers = [];
    }
}
</code></pre></li>
</ul>
<h4 id="区域-添加多边形图层"><a href="#区域-添加多边形图层" class="headerlink" title="区域  添加多边形图层"></a>区域  添加多边形图层</h4><ul>
<li><p>添加数组</p>
<pre><code> var commonMaps = new (window.commonMap)();// 实例化地图方法
commonMaps.areaContent = [];  //行政区域图层     
</code></pre></li>
<li><p>点击每一行时 拿到点位数组</p>
<pre><code>var pointArr = eval(this.currentRowData.points);
if(pointArr.length&gt;0){
           //添加对应区域的多边形图层
           commonMaps.addArea([pointArr],{  
               id: &quot;zidingyiAreaConternt&quot;,
           });
            //添加对应区域的多边形图层的中心点图标
           commonMaps.addMarkers([this.currentRowData],&quot;centerx&quot;,&quot;centery&quot;,{
               src: &quot;../common/image/point2.gif&quot;,
               width: &quot;47px&quot;,
               height: &quot;55px&quot;,
               markerName: &quot;zidingyiGifMarkerCotent&quot;
           });
           commonMaps.changeMapCenter(this.currentRowData.centerx,this.currentRowData.centery,14);
       };
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/15/Elementui/elementui注意点/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/15/Elementui/elementui注意点/" itemprop="url">elementui注意点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-15T10:42:04+08:00">
                2019-07-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>注意点:</p>
<p>  elementui 中的popover弹出层 想要修改每个div的背景色 需要在el-popover上 popper-class=’xxxx’来添加类 才会生效</p>
</li>
<li><p>隐藏组件 滚动条(原生的滚动条会有一条竖向线条 这个是隐藏了滚动条 内容自动撑开)</p>
<ul>
<li><p>父级元素有没有设置固定高度</p>
<pre><code>&lt;div class=&quot;search-item-box&quot;&gt;
        &lt;el-scrollbar&gt;
             xxx内容区域
        &lt;/el-scrollbar&gt;
&lt;/div&gt;

    .scroll-item-bar{
        height: 680px;
    }
    .search-item-box .el-scrollbar__bar.is-vertical{
        width:2px;

    }
    .search-item-box .el-scrollbar__bar.is-vertical&gt;div{
        background: #A1A1A1
    }
</code></pre></li>
</ul>
</li>
<li><p>dialog 弹出框设置动画效果</p>
<pre><code>    @keyframes dialog-fade-in {
    0% {
    transform: translate3d(100%, 0, 0);
    opacity: 0;
    }
    100% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    }
}

@keyframes dialog-fade-out {
    0% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    }
    100% {
    transform: translate3d(100%, 0, 0);
    opacity: 0;
    }
}
</code></pre></li>
<li><p>el-table表格</p>
<p>  border 表示表格加上边框</p>
<p>  鼠标经过 显示详细信息 show-overflow-tooltip 显示</p>
<pre><code>&lt;el-table-column
prop=&quot;cjjg&quot;
label=&quot;采集机关&quot;
width=&quot;180&quot;
show-overflow-tooltip
&gt;
&lt;template slot-scope=&quot;scope&quot;&gt;
    &lt;div class=&quot;cell&quot; :title=&quot;scope.row.cjjg&quot;&gt;{{scope.row.cjjg}}&lt;/div&gt;
&lt;/template&gt;
&lt;/el-table-column&gt;
</code></pre></li>
</ul>
<p>  table 改变背景色 </p>
<pre><code>/deep/  .el-table::before,.el-table::after {left: 0;bottom: 0;  width: 100%;height: 0px;}  
/deep/ .el-table{ 
    background: transparent !important;border:none!important;   //改变背景色
    th, tr{ 
        font-size:18px;background: transparent !important; color: #c0e7ff;text-align: center;
        }
    thead th, .el-table__expanded-cell { color: #4a90e2 !important;}
    td,th.is-leaf{ border-bottom: 1px solid rgba(0, 5, 140, 0.6) !important;}  //改变下边框颜色
    }
/deep/ .el-table--enable-row-hover .el-table__body tr:hover &gt; td {background: #2e6581;} //鼠标经过背景色
/deep/ .el-table__body tr.current-row &gt; td {background-color: rgba(4, 19, 147, 0.5);color: #c0e7ff;} //鼠标点击背景色
</code></pre><p>el-scrollBar 自定义样式</p>
<pre><code>.eventPrognosis-box ::-webkit-scrollbar {width:10px; height:5px; background-color:transparent;} /*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/
.eventPrognosis-box ::-webkit-scrollbar-track {background-color:#142B4F; border-radius:4px; } /*定义滚动条轨道 内阴影+圆角*/
.eventPrognosis-box ::-webkit-scrollbar-thumb {background-color:#80BBCA; border-radius:6px;} /*定义滑块 内阴影+圆角*/
 /deep/ .el-scrollbar__bar{   
 &amp;.is-horizontal, &amp;.is-horizontal&gt; div,&amp;.is-vertical, &amp;.is-vertical&gt; div{ width: 0 !important;}  
  /deep/ .el-scrollbar__wrap {overflow: hidden;margin: 0!important;} //去除自带的横轴纵轴的滚动条
</code></pre><p> } </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/12/echarts/结合geojson散点图/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/12/echarts/结合geojson散点图/" itemprop="url">散点 对应城市区域高亮</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-12T10:42:04+08:00">
                2019-07-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>参照案例 <a href="https://www.cnblogs.com/amor17/p/9076150.html" target="_blank" rel="noopener">https://www.cnblogs.com/amor17/p/9076150.html</a></p>
</li>
<li><p>遍历循环生成series 每个图标对应一个弹框tooltip</p>
<p>  for (let index in pointNumTotal) {</p>
<pre><code>var a = {
type: &apos;scatter&apos;,    //类型为散点
coordinateSystem: &apos;geo&apos;,  //使用的坐标系 &apos;geo&apos;表示地理坐标系 &apos;cartesian2d&apos;表示二维直角坐标系  &apos;polar&apos;表示使用极坐标系
symbol: &apos;image://image/0.png&apos;,  //标记的图形 多种 点 箭头 圆等等 可以通过 &apos;image://url&apos; 设置为图片(url线上地址或者本地绝对路径)
symbolSize: 50,   //标记的大小
itemStyle: {
    normal: {
        color: &apos;#F62157&apos; // 标志颜色
    }
},
 data: [{ name: xxxxx, value: [经度,纬度] }],  //data这个格式是因为拿的json文件是这样的,保持一致 才能正确获取到城市点位
 tooltip: {   //鼠标经过散点出现的弹框 自定义 
        position: &apos;top&apos;,
        formatter: function (params) {
            return &quot;&lt;div style=&apos;width: 160px; height: 130px;&apos;&gt;&quot; +
                &quot;&lt;img src = &apos;./image/BGSS.png&apos; style=&apos;width:100%;height:100%&apos;&gt;&quot; +
                &quot;&lt;div style=&apos;position: absolute;top:14px;left:22px&apos;&gt;&lt;p style = &apos;color : #7d3434&apos;&gt;&quot; + pointNumTotal[index].name + &quot;&lt;/p&gt;&lt;/div&gt;&quot; +
                &quot;&lt;div style=&apos;position: absolute;top:56px;left:22px&apos;&gt;&quot; +
                &quot;&lt;p style = &apos;color : #7d3434;margin-bottom:5.1px&apos;&gt;入 : &quot; + pointNumTotal[index].jcTotal + &quot; 辆&lt;/p&gt;&quot; +
                &quot;&lt;p style = &apos;color : #7d3434&apos;&gt;出 : &quot; + pointNumTotal[index].ccTotal + &quot; 辆&lt;/p&gt;&quot; +
                &quot;&lt;/div&gt;&lt;/div&gt;&quot;;
        },
        backgroundColor: &apos;transparent&apos;
    }
}
list1.push(a);
}
map1[&quot;series&quot;] = list1;
myChart.setOption(map1);
</code></pre></li>
</ul>
<ul>
<li><p>点击table  对应城市的区域高亮 以及展示tooltip弹出框  主要是设置regions属性</p>
<pre><code>var regions = [{
    name: city,
    itemStyle: {
        areaColor: &apos;#8B658B&apos;,
        color: &apos;#8B658B&apos;
    }
}];
var map = {};
var map1 = {};
map[&quot;regions&quot;] = regions;
map1[&quot;geo&quot;] = map;
myChart.setOption(map1)
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/11/常见js方法/js中开启全屏和退出全屏/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/11/常见js方法/js中开启全屏和退出全屏/" itemprop="url">js中开启全屏,退出全屏</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-11T15:42:04+08:00">
                2019-07-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>开启全屏</p>
<p>   fullScreenChange: function () {</p>
<pre><code>    var el = document.documentElement;
    var rfs = el.requestFullScreen || el.webkitRequestFullScreen || el.mozRequestFullScreen || el.msRequestFullScreen;//定义不同浏览器的全屏API
    //执行全屏
    if (typeof rfs != &quot;undefined&quot; &amp;&amp; rfs) {
        rfs.call(el);
    } else if (typeof window.ActiveXObject != &quot;undefined&quot;) {
        var wscript = new ActiveXObject(&quot;WScript.Shell&quot;);
        if (wscript != null) {
            wscript.SendKeys(&quot;{F11}&quot;);
        }
    }
},
</code></pre></li>
<li><p>退出全屏</p>
<pre><code>outFullScreenChange: function () {
    var el = document;
    var cfs = el.cancelFullScreen || el.webkitCancelFullScreen ||
        el.mozCancelFullScreen || el.exitFullScreen;
    if (cfs) { //typeof cfs != &quot;undefined&quot; &amp;&amp; cfs
        cfs.call(el);
    } else if (typeof window.ActiveXObject != &quot;undefined&quot;) {
        //for IE，这里和fullScreen相同，模拟按下F11键退出全屏
        var wscript = new ActiveXObject(&quot;WScript.Shell&quot;);
        if (wscript != null) {
            wscript.SendKeys(&quot;{F11}&quot;);
        }
        }
    }, 
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/11/常见js方法/js时间格式化方法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/11/常见js方法/js时间格式化方法/" itemprop="url">js中格式化时间方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-11T15:42:04+08:00">
                2019-07-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>1.replace替换</p>
<p>  ‘20170710’.replace(/(\d{4})(\d{2})(\d{2})/g,’$1-$2-$3’);  // 2017-07-10</p>
</li>
</ul>
<ul>
<li><p>2.this.formatDate(new Date())  //格式化当日时间</p>
<pre><code>// 时间格式转换成HH:mm:ss
  formatDate: function (unixtimestamp) {
      var unixtimestamp = new Date(unixtimestamp);
      var year = 1900 + unixtimestamp.getYear();
      var month = &quot;0&quot; + (unixtimestamp.getMonth() + 1);
      var date = &quot;0&quot; + unixtimestamp.getDate();
      var hour = &quot;0&quot; + unixtimestamp.getHours();
      var minute = &quot;0&quot; + unixtimestamp.getMinutes();
      var second = &quot;0&quot; + unixtimestamp.getSeconds();
      var ymh = year + &quot;-&quot; + month.substring(month.length - 2, month.length) + &quot;-&quot; + date.substring(date.length - 2, date.length);
      var hms =
          hour.substring(hour.length - 2, hour.length) + &quot;:&quot; +
          minute.substring(minute.length - 2, minute.length) + &quot;:&quot; +
          second.substring(second.length - 2, second.length);
      // var total = ymh + &quot; &quot; + hms; //年月日 时分秒
      // return [ymh, hms, total]; 
      return ymh;
  }
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/10/echarts/echarts/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/10/echarts/echarts/" itemprop="url">echarts使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-10T10:42:04+08:00">
                2019-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="echarts使用"><a href="#echarts使用" class="headerlink" title="echarts使用"></a>echarts使用</h3><ul>
<li><p>1.grid 网格位置</p>
<pre><code>grid: {
       top: 20,
       left: 40,
       right: 15,
       bottom: 50,
       containLabel: false,
       height: &apos;auto&apos;
   }
</code></pre></li>
<li><p>2.xAxis x轴 yAxis同样</p>
<pre><code>xAxis: [{
   type: &apos;category&apos;,
   data: [&apos;Mon&apos;, &apos;Tue&apos;, &apos;Wed&apos;, &apos;Thu&apos;, &apos;Fri&apos;, &apos;Sat&apos;, &apos;Sun&apos;], //x轴显示
   nameGap:15,    //---坐标轴名称与轴线之间的距离(柱子与柱子之间的间距)
   axisLabel: {
           interval:0, //设置成 0 强制显示所有标签（不写就间隔一个显示）
           rotate:40, //x轴文字倾斜程度
           show: true, //控制坐标轴x轴的文字是否显示
       　　textStyle: {
       　　color: &apos;#758697&apos;, //x轴上的字体颜色
       　　fontSize:&apos;16&apos; // x轴字体大小
           }
       }
   }]
</code></pre></li>
</ul>
<pre><code>yAxis: [
    {
        type: &apos;value&apos;,  //type=value时，y轴会根据最大data自动调整，例如data最大是7100，那y轴最大就是8000。
        scale: true,
        name: &apos;价格&apos;,
        max: 30,  //可以设置y轴最高数字
        min: 0,    //y轴最小数字
        boundaryGap: [0.1, 0.4],  //y轴每一行数字之间的间距大小 
        nameTextStyle: {  //改变y轴标题title的字体颜色
            color: &apos;red&apos;
        },
        axisLine:{   //是否显示坐标轴线
           show:false
        },
        axisTick:{  //是否显示坐标轴刻度 
            show:false
        },
        splitLine:{  //分隔线样式设置
            lineStyle:{
                color:[&apos;#858895&apos;],
                type:&apos;dashed&apos;    //虚线 实现可选 &apos;solid&apos; &apos;dashed&apos; &apos;dotted&apos;
            }
     }
    }
],
</code></pre><ul>
<li><ol start="3">
<li><p>series 内容部分</p>
<pre><code>series: [
      {
          name: &apos;销量&apos;,             //---系列名称
          type: &apos;bar&apos;,                //---类型
          legendHoverLink:true,       //---是否启用图例 hover 时的联动高亮
          label:{                     //---图形上的文本标签
              show:false,
              position:&apos;insideTop&apos;,   //---相对位置
              rotate:0,               //---旋转角度
              color:&apos;#eee&apos;,
          },
          smooth:true,   //设置曲线平滑
          itemStyle:{                 //---图形形状
              normal: {     
                  color: function (params) {   //柱状图  各个柱子设置不同的颜色
                      var colorList = [&apos;#5B9BD5&apos;, &apos;#ED7D31&apos;, &apos;#808000&apos;,];
                      return colorList[params.dataIndex];
                  },
                  label: {
                      show: true,
                      position: &apos;top&apos;,
                      formatter: &apos;{c}&apos;
                  }   
              }
          },
          barWidth:&apos;20&apos;,              //---柱形宽度
          barCategoryGap:&apos;20%&apos;,       //---柱形间距   柱状图取消间距，在series: 中设置属性barCategoryGap:-1即可
          data: [3020, 4800, 3600, 6050, 4320, 6200,5050,7200,4521,6700,8000,5020]
      }
  ]
</code></pre></li>
</ol>
</li>
<li><p>4.legend 图例</p>
<pre><code>legend: {
    orient: &apos;horizontal&apos;,   // &apos;horizontal&apos; ¦ &apos;vertical&apos;
    x: &apos;center&apos;,            // &apos;center&apos; ¦ &apos;left&apos; ¦ &apos;right&apos;  图例位置改变
    y: &apos;top&apos;,              // &apos;top&apos; ¦ &apos;bottom&apos; ¦ &apos;center&apos;
    left: &quot;5%&quot;,            //或者使用left top right bottom
    bottom: &quot;5%&quot;,
    backgroundColor: &apos;rgba(0,0,0,0)&apos;，
    icon: &apos;circle&apos;,       //图例icon字样有&apos;circle&apos;椭圆，&apos;rect&apos;矩形，&apos;roundRect&apos;圆角矩形&apos;,triangle&apos;三角形,&apos;diamond&apos;菱形,&apos;pin&apos;正圆, &apos;arrow&apos; 箭头
    borderColor: &apos;#ccc&apos;,       // 图例边框颜色
    borderWidth: 0,            // 图例边框线宽
    padding: 5,                // 图例内边距，单位px，默认各方向内边距为5
    itemGap: 10,               // 各个item之间的间隔，单位px，默认为10，/ 横向布局时为水平间隔，纵向布局时为纵向间隔
    itemWidth: 20,             // 图例 icon 宽度
    itemHeight: 14,            // 图例 icon 高度
    textStyle: {
            fontSize: 22,         // 图例文字大小
        color: &apos;#333&apos;          // 图例文字颜色
    }
}
</code></pre></li>
</ul>
<p>-5. toolbox 工具栏</p>
<pre><code>toolbox: { //可视化的工具箱
     show: true,
     feature: {
         dataView: { //数据视图
             show: true
         },
         restore: { //重置
             show: true
         },
         dataZoom: { //数据缩放视图
             show: true
         },
         saveAsImage: {//保存图片
             show: true
         },
         magicType: {//动态类型切换
             type: [&apos;bar&apos;, &apos;line&apos;]
         }
     }
 },
</code></pre><p>-6. tooltip 弹框   </p>
<pre><code>tooltip: { //弹窗组件
   show: true,
   trigger: &apos;axis&apos;,  //只要有使用类目轴设置axis 如果是散点图，饼图 设置为item
   position: &apos;top&apos;,  //弹框显示位置 只有在设置trigger: &apos;axis&apos;会生效
   axisPointer: {  //设置鼠标移动时候  线形的样式类型
       type: &apos;cross&apos;, // cross是十字架类型 shadow 阴影类型 line直线类型
       crossStyle: {  //对应的style设置
           color: &apos;#fff&apos;
       },
       &lt;!-- type: &apos;shadow&apos;, 
       shadowStyle:{
            color: &apos;#f7080&apos;
       } --&gt;
   }
   },
</code></pre><ul>
<li><p>echarts 树图 type=’treemap’基础配置</p>
<pre><code>option = {
    color:[&apos;#FC6620&apos;,&apos;#3AA0FF&apos;,&apos;#698B22&apos;,&apos;#7FFF00&apos;], //添加颜色 
    tooltip: {
            formatter: function (info) {        //鼠标经过 浮框内容+样式
                var value = info.value;
                var name = info.name;     
                return [name +&apos;:&apos;+value,].join(&apos;&apos;);
        }
    },
    series: [{
        type: &apos;treemap&apos;,   
        breadcrumb:{                //false隐藏面包屑
                show:false
            },
        leafDepth:null,             //表示『展示几层』，层次更深的节点被隐藏起来。点击看到层次更深的节点  默认不开启为null undefinded
        label: {                    //设置显示字体内容  不设置默认只显示value
            show: true,
            formatter: &apos;{b}：{c}&apos;
        },
        data: [
            {
                &quot;value&quot;: &quot;1995&quot;,
                &quot;name&quot;: &quot;鄂&quot;
            },
            {
                &quot;value&quot;: &quot;135&quot;,
                &quot;name&quot;: &quot;豫&quot;
            },
            {
                &quot;value&quot;: &quot;125&quot;,
                &quot;name&quot;: &quot;鲁&quot;
            },
            {
                &quot;value&quot;: &quot;115&quot;,
                &quot;name&quot;: &quot;赣&quot;
            }
            ]
        }]
};
</code></pre></li>
</ul>
<ul>
<li><p>图例绑定事件</p>
<pre><code>myChart.on(&apos;click&apos;, function (value) {
        var type = value.name
        that.getXianChang(that.formatDate(new Date()), type, that.currentCity)
    });

myChart.on(&apos;legendselectchanged&apos;, function(obj) {
    var selected = obj.selected;
    var legend = obj.name;

    // 使用 legendToggleSelect Action 会重新触发 legendselectchanged Event，导致本函数重复运行
    // 使得 无 selected 对象
    if (selected != undefined) {

        if (isFirstUnSelect(selected)) {
            triggerAction(&apos;legendToggleSelect&apos;, selected);
        } else if (isAllUnSelected(selected)) {
            triggerAction(&apos;legendSelect&apos;, selected);

        }
    }

});
</code></pre></li>
</ul>
<ul>
<li><p>echarts：堆叠图</p>
<pre><code>series: [
    {
        name: &apos;总量&apos;,
        type: &apos;line&apos;,
        smooth: true,    //设置折线平滑显示
        symbol: &quot;none&quot;, //去掉折线的小圆圈点
        symbolSize: 5, //设置折线点小圆圈的大小
        stack: &apos;总量&apos;,
        itemStyle: {
            normal: { //颜色渐变函数 前四个参数分别表示四个位置依次为左、下、右、上
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                    offset: 0,
                    color: &apos;#CB8993&apos; // 0% 处的颜色
                }, {
                    offset: 0.5,
                    color: &apos;#CB8993&apos; // 100% 处的颜色
                }, {
                    offset: 1,
                    color: &apos;#CC56CB&apos; // 100% 处的颜色
                }]), //背景渐变色
                lineStyle: { // 系列级个性化折线样式
                    width: 0.5,
                    type: &apos;solid&apos;,
                    color: &quot;#CC56CB&quot;
                }
            }
        },

        areaStyle: {
            normal: {}
        },
        data: [],
    }
]
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/23/插件使用/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/23/插件使用/" itemprop="url">插件踩坑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-23T11:07:04+08:00">
                2019-02-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="vue-bootstrap-datetimepicker-加载日期插件用法"><a href="#vue-bootstrap-datetimepicker-加载日期插件用法" class="headerlink" title="vue-bootstrap-datetimepicker 加载日期插件用法"></a>vue-bootstrap-datetimepicker 加载日期插件用法</h2><ul>
<li><p>在网上找到了一个基于vue扩展的datepicker插件：vue-bootstrap-datepicker。这篇博客主要介绍在使用vue-cli 3创建的项目中如何使用该插件。项目地址：<a href="https://gitlab.com/JiaoXN/vuecli3usedatetimepicker.git" target="_blank" rel="noopener">https://gitlab.com/JiaoXN/vuecli3usedatetimepicker.git</a></p>
</li>
<li><p>1.安装依赖 3个依赖 </p>
<pre><code>cnpm install vue-bootstrap-datetimepicker@4.1.4 moment eonasdan-bootstrap-datetimepicker@4.17.47 --save-dev
</code></pre></li>
<li><p>2.修改 build 下 webpack.dev.conf.js 最下方的 new webpack.ProvidePlugin 增加 moment: ‘moment’</p>
</li>
</ul>
<ul>
<li>3.用法 </li>
</ul>
<pre><code>&lt;div class=&quot;form-group col-xs-2&quot;&gt;
  &lt;label&gt;开始日期：&lt;/label&gt;
  &lt;date-picker v-model=&quot;startDate&quot; :config=&quot;config&quot;&gt;&lt;/date-picker&gt;
&lt;/div&gt;

&lt;script&gt;
    import &apos;bootstrap/dist/css/bootstrap.css&apos;;
    import datePicker from &apos;vue-bootstrap-datetimepicker&apos;;
    import &apos;eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.css&apos;;
    export default {
        name: &apos;fleetList&apos;,
        data() {
        return {
            startDate: new Date(),
            endDate: new Date(),
            config: {
            format: &apos;YYYY-MM-DD&apos;,// 年月日
            // format: &apos;YYYY-MM-DD HH:mm:ss&apos;,// 年月日 时分秒
            useCurrent: false,
            locale: &apos;zh-cn&apos;,
            tooltips: {
                selectTime: &apos;&apos;
            }
            }
        }
        },
        components: {
        datePicker
        }
    }
    &lt;/script&gt;
</code></pre><ul>
<li><p>4.注意：</p>
<p>  format：日期格式，这一块需要注意的是，如果将HH:mm:ss中的HH换成hh，则这个插件描述日期的方式会分成AM和PM</p>
<p>  locale: 表示使用哪种语言，zh-cn表示中文简体</p>
<p>  tooltips: 表示提示内容，这一块这个插件有个Bug，在选择日期和选择时间的提示都是“Select Time”，因此这里把这个提示设置为空</p>
</li>
</ul>
<h2 id="V-Distpicker-省市区地选择器"><a href="#V-Distpicker-省市区地选择器" class="headerlink" title="V - Distpicker 省市区地选择器"></a>V - Distpicker 省市区地选择器</h2><h4 id="具体文档参照：https-distpicker-pigjian-com"><a href="#具体文档参照：https-distpicker-pigjian-com" class="headerlink" title="具体文档参照：https://distpicker.pigjian.com/"></a>具体文档参照：<a href="https://distpicker.pigjian.com/" target="_blank" rel="noopener">https://distpicker.pigjian.com/</a></h4><pre><code>安装：npm install v-distpicker --save / yarn add v-distpicker --save

全局导入：   import VDistpicker from &apos;v-distpicker&apos;
            Vue.component(&apos;v-distpicker&apos;, VDistpicker)

 页面导入：  import VDistpicker from &apos;v-distpicker&apos;
            export default {
            components: { VDistpicker }
            }

            export default {
            data () {
                return {
                    select: { province: &apos;湖北省&apos;, city: &apos;武汉市&apos;, area: &apos;洪山区&apos; },
                }
             }
            }
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/13/解决跨域的三种方式/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/13/解决跨域的三种方式/" itemprop="url">解决跨域的三种方式 JSONP CORS 代理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-13T23:50:00+08:00">
                2019-02-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="解决跨域："><a href="#解决跨域：" class="headerlink" title="解决跨域："></a>解决跨域：</h3><h4 id="一。JSONP："><a href="#一。JSONP：" class="headerlink" title="一。JSONP："></a>一。JSONP：</h4><blockquote>
<p>json数据格式的一种使用方式，原理是利用script标签的src属性，发送请求不受同源策略的限制，来实现跨域资源共享</p>
</blockquote>
<blockquote>
<p>jsonp只能实现get请求</p>
</blockquote>
<blockquote>
<p>步骤：创建script 指定src  插入到文档中</p>
</blockquote>
<h4 id="二。CORS："><a href="#二。CORS：" class="headerlink" title="二。CORS："></a>二。CORS：</h4><p>跨域资源共享，在服务器端返回数据的时候添加响应头</p>
<pre><code>res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);
</code></pre><p>在后端方面通过安装cors包解决，但是cors是指定对应的ip和域来访问，如果换个端口什么的，还是会出现跨域问题</p>
<h4 id="三。代理"><a href="#三。代理" class="headerlink" title="三。代理"></a>三。代理</h4><p>由于跨域在服务器端是不存在的，所以在客户端所在电脑上搭建一个服务器作为中间人就可以了</p>
<p>vue使用代理的方式：<br>1.在项目目录 config 目录下的 index.js 文件<br>2.找到dev代码块</p>
<pre><code>module.export ={
dev:{
            assetsSubDirectory:&apos;static&apos;,
assetsPublicPath:&apos;/&apos;,
proxyTsble:{
‘/api’:{
target:&apos;http://xxx&apos;,
changeOrigin:true,
pathRewrite:{
    &apos;^/api&apos;:&apos; &apos;
}
}
}
}
}
</code></pre><p>主要是修改  proxyTsble:{} 内的数据</p>
<p>参数说明<br>            target: 接口域名<br>            changeOrigin: true, 表示是否跨域<br>            pathRewrite: {‘^/api’: ”} 表示需要rewrite重写的,</p>
<p>配置好这写之后就可以直接使用/api+接口名称发送请求了</p>
<p>例如:原来的请求地址为 192.168.1.1:8080/log</p>
<p>配置代理后直接使用 /api/log 就可以了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/12/封装promise/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/12/封装promise/" itemprop="url">关于promise</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-12T23:42:04+08:00">
                2019-02-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关于promise"><a href="#关于promise" class="headerlink" title="关于promise"></a>关于promise</h2><ul>
<li>ES6提供的promise作为异步操作的新的解决方案<br>  1.代码更有可读性<br>  2.可以更方便的处理多种异步操作组合问题<br>  3.promise 本身就是个构造函数<br>  4.解决了回调函数多层嵌套的问题,但是还是需要通过回调函数的方式获取异步操作的数据</li>
<li>ES7  async$awiat可以简化代码书写<ol>
<li>async 是用来修饰函数，异步函数</li>
<li>awiat  只使用于async修饰过的函数内部，用来修饰promise实例的，awiat后面所跟的代码必须能返回一个promise实例</li>
</ol>
</li>
</ul>
<h2 id="封装promise-发送请求基本步骤"><a href="#封装promise-发送请求基本步骤" class="headerlink" title="封装promise 发送请求基本步骤"></a>封装promise 发送请求基本步骤</h2><ul>
<li>1.自定义一个函数 </li>
<li>2.在自定义函数内部创建一个promise实例并return返回，new Promise时必须传入一个函数，参数是resolve，reject</li>
<li>3.在promise 实例的函数内部  执行真正的异步操作<br>3.1 在真正的异步操作成功时调用resolve将成功的数据返回出去<br>3.2   reject 是将失败的数据返回出去</li>
<li>4.真正使用的时候调用函数获取数据<br><strong>调用 fetch().then()   .then的前面返回的是promise对象</strong></li>
<li><p>前面的.then中return的promise实例内部resolve或者reject出来的数据 可以在后面的.then中接收</p>
<pre><code>function fetch(url){
return new Promise(function(resolve,reject){    
    $.ajax({
    url:‘url’,
    type:&apos;get&apos;,
    success:function(data){
        resolve(data)
    }
    error:function(err){
        reject(err)
    }
    })
})
}
fetch().then(function(res){
console.log（res）
}，function(err){
console.log （err）
})
</code></pre></li>
</ul>
<p>链式编程的风格：有多个请求需要嵌套的时候：</p>
<pre><code>fetch(&apos;aa&apos;).then(function(){
    return fetch(&apos;bb&apos;)
}).then(function(){
    return fetch(&apos;cc&apos;)
})
</code></pre><p>如果是使用async,定义一个使用async修饰的函数，简化上步代码更加简洁：</p>
<pre><code> async function getdata(){
     //fetch().then() 拿数据 
    const res1 = await fetch(&apos;aa&apos;)
    const res1 = await fetch(&apos;bb&apos;)
    const res1 = await fetch(&apos;cc&apos;)
}
</code></pre><h2 id="封装promise-读取文件"><a href="#封装promise-读取文件" class="headerlink" title="封装promise 读取文件"></a>封装promise 读取文件</h2><pre><code>const fs = require(&apos;fs&apos;)
const path = require(&apos;path&apos;)

 //1.定义一个函数
function getContent(filename){
 //2.在函数内部创建一个promise实例并返回
return new Promise(function(resolve,reject){
 //3.在promise实例内部执行真正的异步操作

fs.rendFile(path.join(__dirname,filname),&apos;utf-8&apos;,(err,data)=&gt;{
    if(!err){
    //3.1 异步操作成功调用resolve将数据返回
      resolve(data)
}else{
    //3.2 异步操作失败调用reject将数据返回
    reject(err)
}
})
})
}
</code></pre><p> 调用封装好的函数来读取文件</p>
<pre><code>getContent(‘路径’).then(function(data){
    //这里的data是promise实例内部hi用reaolve的数据返回
    console.log(data)
},function(err){
    console.log(err)
}
})
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/20/UI/使用Mint ui遇到的问题/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangXiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王相的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/20/UI/使用Mint ui遇到的问题/" itemprop="url">Mint UI 使用过程遇到的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-20T11:07:04+08:00">
                2019-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">WangXiang</p>
              <p class="site-description motion-element" itemprop="description">时间不负有心人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">54</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WangXiang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
